<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Adventure in Guatemala - Prototype</title>
  <style>
    body {
      font-family: sans-serif;
      background: url('background-texture.jpg') no-repeat center center fixed;
      background-size: cover;
      padding: 2rem;
      line-height: 1.6;
      color: #111;
      font-size: 1.2rem;
      position: relative;
    }
    .container {
      max-width: 900px;
      margin: 0 auto;
    }
    .sentence-block {
      margin-bottom: 2rem;
      display: flex;
      flex-direction: row;
      align-items: flex-start;
      justify-content: center;
      gap: 1rem;
    }
    .emoji-buttons {
      display: flex;
      flex-direction: row;
      align-items: flex-start;
      justify-content: center;
      gap: 0.5rem;
      opacity: 0;
      transition: opacity 0.3s ease;
    }
    .text-block {
      text-align: center;
      display: flex;
      flex-direction: column;
      align-items: center;
      max-width: 500px;
      width: 100%;
    }
    .text-block > div {
      width: 100%;
    }
    .translation {
      display: none;
      margin-top: 0.5rem;
      color: #555;
    }
    button {
      cursor: pointer;
      border: none;
      background: none;
      font-size: 1.2rem;
    }
    .sentence-block:hover .emoji-buttons {
      opacity: 1;
    }
    @media (hover: none) {
      .sentence-block:hover .emoji-buttons {
        opacity: 0;
      }
      .sentence-block.show-buttons .emoji-buttons {
        opacity: 1;
      }
    }
    .image-left-wrapper {
      position: fixed;
      top: 180px;
      left: 20px;
      z-index: -1;
    }
    .image-left {
      width: 220px;
      border-radius: 16px;
      opacity: 0.95;
    }
    @media (max-width: 768px) {
      .image-left-wrapper {
        display: none;
      }
    }
  </style>
</head>
<body>
  <div class="image-left-wrapper">
    <img src="image1.pedro.png" alt="Pedro" class="image-left">
  </div>
  <div class="container">
    <h1 style="text-align: center;">Adventure in Guatemala</h1>
    <h2 style="text-align: center;">Part 1</h2>
    <div id="story"></div>
  </div>

  <script>
    const sentences = [
      { en: "My name is Pedro, and I live in a quiet town in Guatemala.", es: "Mi nombre es Pedro, y vivo en un pueblo tranquilo de Guatemala." },
      { en: "One afternoon, my friend Juan came over with something in his hand. It was a map.", es: "Una tarde, mi amigo Juan vino con algo en la mano. Era un mapa." },
      { en: "The paper looked old, like it had been hidden for a long time.", es: "El papel parec√≠a viejo, como si hubiera estado escondido por mucho tiempo." },
      { en: "Faded lines ran across it, leading into the forest.", es: "L√≠neas desvanecidas lo cruzaban, conduciendo al bosque." },
      { en: "We studied it together, trying to understand what it meant.", es: "Lo estudiamos juntos, tratando de entender qu√© significaba." },
      { en: "\"Maybe it leads to something important,\" Juan said. I agreed.", es: "\"Tal vez conduce a algo importante,\" dijo Juan. Yo estuve de acuerdo." },
      { en: "The next morning, we packed a few things and left before the sun was high.", es: "A la ma√±ana siguiente, empacamos algunas cosas y salimos antes de que el sol estuviera alto." },
      { en: "The road was long and hot. We passed trees, birds, and small rivers.", es: "El camino era largo y caluroso. Pasamos √°rboles, p√°jaros y peque√±os r√≠os." },
      { en: "Most of the time, the only sounds were our steps and the wind.", es: "La mayor√≠a del tiempo, los √∫nicos sonidos eran nuestros pasos y el viento." },
      { en: "Still, I felt something in the air. The forest seemed quiet‚Äîbut in a different way, like it was waiting for us.", es: "Aun as√≠, sent√≠a algo en el aire. El bosque parec√≠a tranquilo, pero de una manera diferente, como si estuviera esper√°ndonos." },
      { en: "After hours of walking, we reached a cave.", es: "Despu√©s de horas de caminar, llegamos a una cueva." },
      { en: "From the outside, it didn‚Äôt look special.", es: "Desde afuera, no parec√≠a especial." },
      { en: "But when I stepped inside, the air turned cold, and the light from the entrance didn‚Äôt follow me far.", es: "Pero cuando entr√©, el aire se volvi√≥ fr√≠o, y la luz de la entrada no me sigui√≥ muy lejos." },
      { en: "The walls were covered in pictures. Some showed people, others strange shapes.", es: "Las paredes estaban cubiertas de dibujos. Algunos mostraban personas, otros formas extra√±as." },
      { en: "One looked like the sun and moon together. Another showed three people with something glowing around them.", es: "Uno parec√≠a el sol y la luna juntos. Otro mostraba a tres personas con algo brillante alrededor de ellas." },
      { en: "I couldn‚Äôt explain it, but I felt a strong emotion. It wasn‚Äôt fear‚Äîmore like a heavy feeling in my chest.", es: "No pod√≠a explicarlo, pero sent√≠ una emoci√≥n fuerte. No era miedo, m√°s bien una sensaci√≥n de peso en el pecho." },
      { en: "Something about the pictures felt personal, like they were part of a story I had forgotten.", es: "Algo en las im√°genes se sent√≠a personal, como si fueran parte de una historia que hab√≠a olvidado." },
      { en: "As the day ended, we began to walk back. But the forest had changed.", es: "Al terminar el d√≠a, comenzamos a regresar. Pero el bosque hab√≠a cambiado." },
      { en: "The air was colder. The wind was louder. The trees didn‚Äôt feel the same.", es: "El aire era m√°s fr√≠o. El viento m√°s fuerte. Los √°rboles no se sent√≠an igual." },
      { en: "Then we heard a sound behind us. Juan looked at me. We both stopped walking.", es: "Entonces escuchamos un sonido detr√°s de nosotros. Juan me mir√≥. Ambos dejamos de caminar." },
      { en: "\"I don‚Äôt think we‚Äôre alone,\" he said.", es: "\"No creo que estemos solos,\" dijo." },
      { en: "From the shadows, an old man stepped out.", es: "Desde las sombras, un anciano sali√≥." },
      { en: "His face was serious, and he wore long clothes that moved in the wind.", es: "Su rostro era serio, y vest√≠a ropas largas que se mov√≠an con el viento." },
      { en: "At first, he said nothing. Then he looked at us and spoke.", es: "Al principio, no dijo nada. Luego nos mir√≥ y habl√≥." },
      { en: "\"You were inside the cave.\" We stayed silent.", es: "\"Estaban dentro de la cueva.\" Nos quedamos en silencio." },
      { en: "He nodded. \"Be careful. That place holds more than pictures.\"", es: "Asinti√≥. \"Tengan cuidado. Ese lugar guarda m√°s que im√°genes.\"" },
      { en: "Without another word, he turned and walked away into the dark.", es: "Sin decir m√°s, se dio la vuelta y se alej√≥ en la oscuridad." },
      { en: "We stood there for a moment. I looked at Juan. He looked back at me.", es: "Nos quedamos all√≠ por un momento. Mir√© a Juan. √âl me devolvi√≥ la mirada." },
      { en: "Something had changed. This was only the beginning.", es: "Algo hab√≠a cambiado. Esto era solo el comienzo." }
    ];

    const container = document.getElementById('story');

    let availableVoices = [];

    function loadVoices() {
      return new Promise((resolve) => {
        let voices = speechSynthesis.getVoices();
        if (voices.length) {
          resolve(voices);
        } else {
          speechSynthesis.onvoiceschanged = () => {
            voices = speechSynthesis.getVoices();
            resolve(voices);
          };
        }
      });
    }

    function playTTS(text, lang) {
      if (!window.speechSynthesis) return;
      const utterance = new SpeechSynthesisUtterance(text);
      utterance.lang = lang;
      const matchedVoice = availableVoices.find(voice => voice.lang.startsWith(lang));
      if (matchedVoice) utterance.voice = matchedVoice;
      speechSynthesis.cancel();
      speechSynthesis.speak(utterance);
    }

    function toggleTranslation(button) {
      const translationDiv = button.closest('.sentence-block').querySelector('.translation');
      translationDiv.style.display = translationDiv.style.display === 'block' ? 'none' : 'block';
    }

    loadVoices().then((voices) => {
      availableVoices = voices;
      sentences.forEach(({ en, es }) => {
        const block = document.createElement('div');
        block.className = 'sentence-block';

        const emojiButtons = document.createElement('div');
        emojiButtons.className = 'emoji-buttons';
        emojiButtons.innerHTML = `
          <button onclick="playTTS('${en.replace(/'/g, "\\'")}', 'en')">üîä</button>
          <button onclick="toggleTranslation(this)">‚úç</button>
        `;

        const textBlock = document.createElement('div');
        textBlock.className = 'text-block';
        const original = document.createElement('div');
        original.textContent = en;
        const translation = document.createElement('div');
        translation.className = 'translation';
        translation.textContent = es;

        textBlock.appendChild(original);
        textBlock.appendChild(translation);

        block.appendChild(emojiButtons);
        block.appendChild(textBlock);

        block.addEventListener('click', () => {
          if (window.matchMedia('(hover: none)').matches) {
            block.classList.toggle('show-buttons');
          }
        });

        container.appendChild(block);
      });
    });
  </script>
</body>
</html>
